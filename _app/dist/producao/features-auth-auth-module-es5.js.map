{"version":3,"sources":["src/app/features/auth/auth.component.html","src/app/features/auth/auth.component.css","src/app/features/auth/auth.component.ts","src/app/features/auth/auth.module.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<section>\\r\\n    <div class=\\\"container\\\">\\r\\n        <div class=\\\"row justify-content-center\\\">\\r\\n            <div class=\\\"col-sm-8 col-lg-5 p-4 panel\\\">\\r\\n                <header class=\\\"text-center mb-4\\\">\\r\\n                    <h2 class=\\\"h2 g-color-black g-font-weight-600\\\">\\r\\n                        <i class=\\\"fal fa-lock-alt\\\"></i>&nbsp;&nbsp;Área Restrita\\r\\n                    </h2>\\r\\n                </header>\\r\\n                <div *ngIf=\\\"showMessageError\\\" >\\r\\n                    <alert-error [(show)]=\\\"showMessageError\\\">Credenciais Inválidas</alert-error>\\r\\n                </div>\\r\\n                <alert-error [(show)]=\\\"btnReenvio\\\">\\r\\n                    Reenvie o e-mail para confirmação\\r\\n                </alert-error>\\r\\n                <div *ngIf=\\\"btnReenvio\\\" class=\\\"mb-4 d-flex justify-content-center\\\">\\r\\n\\r\\n                    <button type=\\\"button\\\"\\r\\n                            (click)=\\\"ReenviarConfirmacao()\\\"\\r\\n                            class=\\\"btn btn-lg btn-danger\\\" >\\r\\n                        <i class=\\\"fal fa-envelope\\\"></i>&nbsp;Reenviar\\r\\n                    </button>\\r\\n                </div>\\r\\n                <form class=\\\"form-signin form-validate g-py-15\\\" (submit)=\\\"submit()\\\">\\r\\n                    <div [formGroup]=\\\"form\\\" class=\\\"mb-4\\\">\\r\\n                        <label [for]=\\\"'email'\\\"\\r\\n                               class=\\\"g-color-gray-dark-v2 g-font-weight-600 g-font-size-13\\\">\\r\\n                            Email:\\r\\n                        </label>\\r\\n                        <input [id]=\\\"'email'\\\"\\r\\n                               type=\\\"email\\\"\\r\\n                               formControlName=\\\"email\\\"\\r\\n                               class=\\\"form-control g-color-black g-bg-white g-bg-white--focus g-brd-gray-light-v4 g-brd-primary--hover rounded g-py-15 g-px-15\\\"\\r\\n                               placeholder=\\\"Digite o e-mail\\\" autofocus>\\r\\n                        <field-error [field]=\\\"form.get('email')\\\"\\r\\n                                     [label]=\\\"'E-mail'\\\"\\r\\n                                     [messages]=\\\"[]\\\"></field-error>\\r\\n                    </div>\\r\\n                    <div [formGroup]=\\\"form\\\" class=\\\"g-mb-35\\\">\\r\\n                        <label [for]=\\\"'senha'\\\"\\r\\n                               class=\\\"g-color-gray-dark-v2 g-font-weight-600 g-font-size-13\\\">\\r\\n                            Password:\\r\\n                        </label>\\r\\n                        <input [id]=\\\"'senha'\\\"\\r\\n                               type=\\\"password\\\"\\r\\n                               formControlName=\\\"senha\\\"\\r\\n                               class=\\\"form-control g-color-black g-bg-white g-bg-white--focus g-brd-gray-light-v4 g-brd-primary--hover rounded g-py-15 g-px-15\\\"\\r\\n                               placeholder=\\\"Digite a Senha\\\" autofocus>\\r\\n                        <field-error [field]=\\\"form.get('senha')\\\"\\r\\n                                     [label]=\\\"'Senha'\\\"\\r\\n                                     [messages]=\\\"[]\\\"></field-error>\\r\\n\\r\\n                        <div class=\\\"row justify-content-between\\\">\\r\\n                            <div class=\\\"col align-self-center\\\">\\r\\n\\r\\n                            </div>\\r\\n                            <div class=\\\"col align-self-center text-right\\\">\\r\\n                                <a [routerLink]=\\\"['/forgot']\\\" class=\\\"g-font-size-12\\\">\\r\\n                                    Esqueceu a senha?\\r\\n                                </a>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"mb-4 mt-4 d-flex justify-content-center\\\">\\r\\n                        <button type=\\\"submit\\\"\\r\\n                                id=\\\"entrar\\\"\\r\\n                                [hidden]=\\\"!btnEntrar\\\"\\r\\n                                [disabled]=\\\"!form.valid\\\"\\r\\n                                class=\\\"btn btn-lg btn-primary waves-effect waves-themed\\\">\\r\\n                            Entrar\\r\\n                        </button>\\r\\n                        <button class=\\\"btn btn-lg btn-danger waves-effect waves-themed\\\"\\r\\n                                type=\\\"button\\\"\\r\\n                                [hidden]=\\\"btnEntrar\\\"\\r\\n                                disabled=\\\"\\\">\\r\\n                            <span class=\\\"spinner-grow spinner-grow-sm\\\"\\r\\n                                  role=\\\"status\\\"\\r\\n                                  aria-hidden=\\\"true\\\"></span>\\r\\n                            Aguarde...\\r\\n                        </button>\\r\\n                    </div>\\r\\n                </form>\\r\\n                <footer class=\\\"text-center\\\">\\r\\n                    <p class=\\\"g-color-gray-dark-v5 g-font-size-13 mb-0\\\">\\r\\n                        Ainda não está cadastrado?\\r\\n                        <a [routerLink]=\\\"['/register']\\\" class=\\\"g-font-weight-600\\\">\\r\\n                            Cadastre-se\\r\\n                        </a>\\r\\n                    </p>\\r\\n                </footer>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n</section>\\r\\n\"","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2ZlYXR1cmVzL2F1dGgvYXV0aC5jb21wb25lbnQuY3NzIn0= */\"","import {\n  ChangeDetectorRef,\n  Component,\n  OnDestroy,\n  OnInit\n} from '@angular/core';\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { AuthService } from \"../../services/auth.service\";\nimport { NotifyMessageService } from \"../../services/notify-message.service\";\nimport {\n  FormBuilder,\n  FormGroup,\n  Validators\n} from \"@angular/forms\";\nimport { UsuarioHttpService } from \"../../services/http/cadastro/usuario-http.service\";\nimport { Usuario } from \"../../model\";\nimport { ConfiguracaoHttpService } from \"../../services/http/configuracao/configuracao-http.service\";\n\n@Component({\n  selector: 'auth',\n  templateUrl: './auth.component.html',\n  styleUrls: ['./auth.component.css']\n})\nexport class AuthComponent implements OnInit,OnDestroy {\n  btnEntrar: boolean = true;\n  btnReenvio: boolean = false;\n\n  form: FormGroup;\n\n  usuario: Usuario | null;\n\n  showMessageError: boolean = false;\n\n  //Subscribes\n  subscribes: any;\n\n  constructor(private authService: AuthService,\n              private router: Router,\n              private route: ActivatedRoute,\n              private formBuilder: FormBuilder,\n              private changeRef: ChangeDetectorRef,\n              private notifyMessage: NotifyMessageService,\n              private usuarioHttp: UsuarioHttpService,\n              private configuracaoHttpService: ConfiguracaoHttpService) {\n\n    this.form = this.formBuilder.group({\n      email       :   [ 'admin@email.com' ,[ Validators.required,Validators.email ]],\n      senha       :   [ '123' ,[ Validators.required ]]\n    });\n  }\n\n  ngOnInit() {\n    this.usuario = this.authService.getUsuarioSession();\n    if(this.usuario)\n      this.router.navigateByUrl('/admin');\n\n\n    if (this.route.snapshot.queryParams.confirmado !== undefined && this.route.snapshot.queryParams.confirmado) {\n      this.notifyMessage.success(\"Você foi ativado com sucesso\",2000);\n      this.router.navigateByUrl('/auth');\n    }\n  }\n\n  ngOnDestroy() {\n  }\n\n  async submit()\n  {\n    this.btnEntrar = false;\n    this.authService.login(this.form.value).subscribe(async (response) => {\n      this.btnEntrar = true;\n      this.changeRef.detectChanges();\n\n      if(response.result){\n        this.authService.setUsuarioSession(response.usuario);\n        await  this.authService.setAdmin();\n\n        this.configuracaoHttpService.autoSet();\n\n        this.router.navigateByUrl('/admin');\n      }else{\n        this.notifyMessage.error(response.msg);\n        if(response.tipo){\n          this.btnReenvio = true;\n          this.changeRef.detectChanges();\n        }\n      }\n    },(error) => {\n      this.notifyMessage.error(\"Email ou senha incorreto!\");\n      this.btnEntrar = true;\n      this.changeRef.detectChanges();\n    });\n\n    return false;\n  }\n\n  ReenviarConfirmacao()\n  {\n    this.btnReenvio = false;\n\n    let subscribe = this.usuarioHttp.enviaConfirmacao(this.form.value).subscribe((response) => {\n      if(response.result){\n        this.notifyMessage.success('Acesse o email na caixa de entrada para ativar sua conta');\n      }else\n        this.notifyMessage.error('Houve um erro ao enviar o e-mail de confirmação, entre em contato com o administrador para solicitar a ativação');\n\n      this.btnReenvio = true;\n      this.changeRef.detectChanges();\n    },(error) => {\n      this.notifyMessage.error('Houve um erro ao enviar o e-mail de confirmação, entre em contato com o administrador para solicitar a ativação');\n      this.btnReenvio = true;\n      this.changeRef.detectChanges();\n    });\n\n    this.subscribes.push(subscribe);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { AuthComponent } from './auth.component';\nimport { BootstrapModule } from \"../../bootstrap/bootstrap.module\";\nimport { CommonModule } from \"@angular/common\";\nimport { FormsModule, ReactiveFormsModule } from \"@angular/forms\";\n\n@NgModule({\n  declarations: [AuthComponent],\n    imports: [\n        CommonModule,\n        FormsModule,\n        RouterModule.forChild([\n            {\n                path: '', component: AuthComponent,\n                data: {breadcrumbs: ['Dashboard', 'Auth']}\n            }\n        ]),\n        BootstrapModule,\n        ReactiveFormsModule\n    ]\n})\nexport class AuthModule { }\n"],"sourceRoot":"webpack:///","file":"features-auth-auth-module-es5.js"}